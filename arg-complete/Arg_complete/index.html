<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"><head><title>Arg_complete (arg-complete.Arg_complete)</title><link rel="stylesheet" href="../../odoc.support/odoc.css"/><meta charset="utf-8"/><meta name="generator" content="odoc 2.2.0"/><meta name="viewport" content="width=device-width,initial-scale=1.0"/><script src="../../odoc.support/highlight.pack.js"></script><script>hljs.initHighlightingOnLoad();</script></head><body class="odoc"><nav class="odoc-nav"><a href="../index.html">Up</a> â€“ <a href="../index.html">arg-complete</a> &#x00BB; Arg_complete</nav><header class="odoc-preamble"><h1>Module <code><span>Arg_complete</span></code></h1></header><nav class="odoc-toc"><ul><li><a href="#specification">Specification</a></li><li><a href="#parsing">Parsing</a></li><li><a href="#completing">Completing</a></li><li><a href="#convenience">Convenience</a></li></ul></nav><div class="odoc-content"><h2 id="specification"><a href="#specification" class="anchor"></a>Specification</h2><p>Command line argument specifications are extended with completion functions.</p><div class="odoc-spec"><div class="spec type anchored" id="type-complete"><a href="#type-complete" class="anchor"></a><code><span><span class="keyword">type</span> complete</span><span> = <span>string <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Type for function providing single-argument completions.</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-complete_all"><a href="#type-complete_all" class="anchor"></a><code><span><span class="keyword">type</span> complete_all</span><span> = <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <span>string list</span></span></code></div><div class="spec-doc"><p>Type for function providing multiple-argument completions (only in <a href="#type-spec.Rest_all"><code>Rest_all</code></a>).</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-spec"><a href="#type-spec" class="anchor"></a><code><span><span class="keyword">type</span> spec</span><span> = </span></code><ol><li id="type-spec.Unit" class="def variant constructor anchored"><a href="#type-spec.Unit" class="anchor"></a><code><span>| </span><span><span class="constructor">Unit</span> <span class="keyword">of</span> <span>unit <span class="arrow">&#45;&gt;</span></span> unit</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Call the function with unit argument</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Bool" class="def variant constructor anchored"><a href="#type-spec.Bool" class="anchor"></a><code><span>| </span><span><span class="constructor">Bool</span> <span class="keyword">of</span> <span>bool <span class="arrow">&#45;&gt;</span></span> unit</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Call the function with a bool argument</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Set" class="def variant constructor anchored"><a href="#type-spec.Set" class="anchor"></a><code><span>| </span><span><span class="constructor">Set</span> <span class="keyword">of</span> <span>bool <span class="xref-unresolved">Stdlib</span>.ref</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Set the reference to true</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Clear" class="def variant constructor anchored"><a href="#type-spec.Clear" class="anchor"></a><code><span>| </span><span><span class="constructor">Clear</span> <span class="keyword">of</span> <span>bool <span class="xref-unresolved">Stdlib</span>.ref</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Set the reference to false</p><span class="comment-delim">*)</span></div></li><li id="type-spec.String" class="def variant constructor anchored"><a href="#type-spec.String" class="anchor"></a><code><span>| </span><span><span class="constructor">String</span> <span class="keyword">of</span> <span>string <span class="arrow">&#45;&gt;</span></span> unit * <a href="#type-complete">complete</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Call the function with a string argument</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Set_string" class="def variant constructor anchored"><a href="#type-spec.Set_string" class="anchor"></a><code><span>| </span><span><span class="constructor">Set_string</span> <span class="keyword">of</span> <span>string <span class="xref-unresolved">Stdlib</span>.ref</span> * <a href="#type-complete">complete</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Set the reference to the string argument</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Int" class="def variant constructor anchored"><a href="#type-spec.Int" class="anchor"></a><code><span>| </span><span><span class="constructor">Int</span> <span class="keyword">of</span> <span>int <span class="arrow">&#45;&gt;</span></span> unit * <a href="#type-complete">complete</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Call the function with an int argument</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Set_int" class="def variant constructor anchored"><a href="#type-spec.Set_int" class="anchor"></a><code><span>| </span><span><span class="constructor">Set_int</span> <span class="keyword">of</span> <span>int <span class="xref-unresolved">Stdlib</span>.ref</span> * <a href="#type-complete">complete</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Set the reference to the int argument</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Float" class="def variant constructor anchored"><a href="#type-spec.Float" class="anchor"></a><code><span>| </span><span><span class="constructor">Float</span> <span class="keyword">of</span> <span>float <span class="arrow">&#45;&gt;</span></span> unit * <a href="#type-complete">complete</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Call the function with a float argument</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Set_float" class="def variant constructor anchored"><a href="#type-spec.Set_float" class="anchor"></a><code><span>| </span><span><span class="constructor">Set_float</span> <span class="keyword">of</span> <span>float <span class="xref-unresolved">Stdlib</span>.ref</span> * <a href="#type-complete">complete</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Set the reference to the float argument</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Tuple" class="def variant constructor anchored"><a href="#type-spec.Tuple" class="anchor"></a><code><span>| </span><span><span class="constructor">Tuple</span> <span class="keyword">of</span> <span><a href="#type-spec">spec</a> list</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Take several arguments according to the spec list</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Symbol" class="def variant constructor anchored"><a href="#type-spec.Symbol" class="anchor"></a><code><span>| </span><span><span class="constructor">Symbol</span> <span class="keyword">of</span> <span>string list</span> * <span>string <span class="arrow">&#45;&gt;</span></span> unit</span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Take one of the symbols as argument and call the function with the symbol</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Rest" class="def variant constructor anchored"><a href="#type-spec.Rest" class="anchor"></a><code><span>| </span><span><span class="constructor">Rest</span> <span class="keyword">of</span> <span>string <span class="arrow">&#45;&gt;</span></span> unit * <a href="#type-complete">complete</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Stop interpreting keywords and call the function with each remaining argument</p><span class="comment-delim">*)</span></div></li><li id="type-spec.Rest_all" class="def variant constructor anchored"><a href="#type-spec.Rest_all" class="anchor"></a><code><span>| </span><span><span class="constructor">Rest_all</span> <span class="keyword">of</span> <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> unit * <a href="#type-complete_all">complete_all</a></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>Stop interpreting keywords and call the function with all remaining arguments</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> OCaml 4.12</li></ul><span class="comment-delim">*)</span></div></li><li id="type-spec.Expand" class="def variant constructor anchored"><a href="#type-spec.Expand" class="anchor"></a><code><span>| </span><span><span class="constructor">Expand</span> <span class="keyword">of</span> <span>string <span class="arrow">&#45;&gt;</span></span> <span>string array</span></span></code><div class="def-doc"><span class="comment-delim">(*</span><p>If the remaining arguments to process are of the form <code>[&quot;-foo&quot;; &quot;arg&quot;] @ rest</code> where &quot;foo&quot; is registered as <code>Expand f</code>, then the arguments <code>f &quot;arg&quot; @ rest</code> are processed. Only allowed in <code>Stdlib</code>.Arg.parse_and_expand_argv_dynamic.</p><ul class="at-tags"><li class="since"><span class="at-tag">since</span> OCaml 4.05</li></ul><span class="comment-delim">*)</span></div></li></ol></div></div><p>Command line argument specification like <code>Stdlib</code>.Arg.spec, but extended with completion functions.</p><div class="odoc-spec"><div class="spec module anchored" id="module-Rest_all_compat"><a href="#module-Rest_all_compat" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Rest_all_compat/index.html">Rest_all_compat</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div><div class="spec-doc"><p>Compatibility for <a href="#type-spec.Rest_all"><code>Rest_all</code></a> before OCaml 4.12</p></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-speclist"><a href="#type-speclist" class="anchor"></a><code><span><span class="keyword">type</span> speclist</span><span> = <span><span>(<span class="xref-unresolved">Stdlib</span>.Arg.key * <a href="#type-spec">spec</a> * <span class="xref-unresolved">Stdlib</span>.Arg.doc)</span> list</span></span></code></div></div><div class="odoc-spec"><div class="spec type anchored" id="type-arg_speclist"><a href="#type-arg_speclist" class="anchor"></a><code><span><span class="keyword">type</span> arg_speclist</span><span> = <span><span>(<span class="xref-unresolved">Stdlib</span>.Arg.key * <span class="xref-unresolved">Stdlib</span>.Arg.spec * <span class="xref-unresolved">Stdlib</span>.Arg.doc)</span> list</span></span></code></div></div><h2 id="parsing"><a href="#parsing" class="anchor"></a>Parsing</h2><p>The library does not provide parsing of command line arguments itself. Instead, the following functions can be used to strip completion functions from specifications, such that parsing functions from <code>Stdlib</code>.Arg can be used.</p><div class="odoc-spec"><div class="spec value anchored" id="val-arg_spec"><a href="#val-arg_spec" class="anchor"></a><code><span><span class="keyword">val</span> arg_spec : <span><a href="#type-spec">spec</a> <span class="arrow">&#45;&gt;</span></span> <span class="xref-unresolved">Stdlib</span>.Arg.spec</span></code></div><div class="spec-doc"><p>Strip completion functions from <a href="#type-spec"><code>spec</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-arg_speclist"><a href="#val-arg_speclist" class="anchor"></a><code><span><span class="keyword">val</span> arg_speclist : <span><a href="#type-speclist">speclist</a> <span class="arrow">&#45;&gt;</span></span> <a href="#type-arg_speclist">arg_speclist</a></span></code></div><div class="spec-doc"><p>Strip completion functions from <a href="#type-speclist"><code>speclist</code></a>.</p></div></div><h2 id="completing"><a href="#completing" class="anchor"></a>Completing</h2><div class="odoc-spec"><div class="spec type anchored" id="type-anon_complete"><a href="#type-anon_complete" class="anchor"></a><code><span><span class="keyword">type</span> anon_complete</span><span> = <a href="#type-complete">complete</a></span></code></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-complete_argv"><a href="#val-complete_argv" class="anchor"></a><code><span><span class="keyword">val</span> complete_argv : 
  <span>?prefer_getopt_long:bool <span class="arrow">&#45;&gt;</span></span>
  <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-speclist">speclist</a> <span class="arrow">&#45;&gt;</span></span>
  <span><a href="#type-anon_complete">anon_complete</a> <span class="arrow">&#45;&gt;</span></span>
  <span>string list</span></span></code></div><div class="spec-doc"><p><code>complete_argv args speclist anon_complete</code> provides the completions for the partial arguments <code>args</code> using <code>speclist</code> for options and <code>anon_complete</code> for anonymous arguments.</p><ul class="at-tags"><li class="parameter"><span class="at-tag">parameter</span> <span class="value">prefer_getopt_long</span> <p>Complete <code>=</code> for options with argument (<code>false</code> by default). GNU <code>getopt_long</code> format <code>keyword=arg</code> is supported regardless.</p></li></ul></div></div><h2 id="convenience"><a href="#convenience" class="anchor"></a>Convenience</h2><div class="odoc-spec"><div class="spec value anchored" id="val-empty"><a href="#val-empty" class="anchor"></a><code><span><span class="keyword">val</span> empty : <a href="#type-complete">complete</a></span></code></div><div class="spec-doc"><p>Completion function with constant empty result.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-empty_all"><a href="#val-empty_all" class="anchor"></a><code><span><span class="keyword">val</span> empty_all : <a href="#type-complete_all">complete_all</a></span></code></div><div class="spec-doc"><p>Completion function with constant empty result for <a href="#type-spec.Rest_all"><code>Rest_all</code></a>.</p></div></div><div class="odoc-spec"><div class="spec value anchored" id="val-strings"><a href="#val-strings" class="anchor"></a><code><span><span class="keyword">val</span> strings : <span><span>string list</span> <span class="arrow">&#45;&gt;</span></span> <a href="#type-complete">complete</a></span></code></div><div class="spec-doc"><p>Completion function for a list of possible strings.</p></div></div><div class="odoc-spec"><div class="spec module anchored" id="module-Util"><a href="#module-Util" class="anchor"></a><code><span><span class="keyword">module</span> <a href="Util/index.html">Util</a></span><span> : <span class="keyword">sig</span> ... <span class="keyword">end</span></span></code></div></div></div></body></html>